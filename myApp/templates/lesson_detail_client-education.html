{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>{{ lesson.title }} — Lesson 8</title>
  <script src="https://cdn.tailwindcss.com"></script>  {# remove if Tailwind is global #}
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  <style>
    :root{ --ink:#0b1027; --muted:#64748b; --brand:#18AFAB; --soft:#f8fafc; }
    .ink{color:var(--ink)} .muted{color:var(--muted)} .brand{color:var(--brand)}
    .card{background:#fff; box-shadow:0 10px 30px rgba(2,6,23,.06)}
    .progress{height:3px; background:linear-gradient(90deg,var(--brand),#22c55e)}
    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.375rem .75rem;border-radius:.75rem;border:1px solid}
  </style>
</head>
<body class="bg-white text-slate-900 antialiased">
    {% include "partials/chatbot.html" %}
    

  <!-- progress -->
  <div id="progressBar" class="fixed top-0 left-0 right-0 z-50 progress" style="width:0%"></div>

  <!-- Breadcrumb -->
  <nav class="border-b bg-white/80 backdrop-blur sticky top-0 z-40">
    <div class="max-w-6xl mx-auto px-6 py-3 flex items-center justify-between">
      <ol class="flex items-center gap-2 text-sm text-slate-500">
        <li><a href="{% url 'lesson6' %}" class="hover:text-slate-900">Lesson 6 Overview</a></li>
        <li class="text-slate-400">/</li>
        <li class="text-slate-900 font-semibold">{{ lesson.title }}</li>
      </ol>
      <div class="hidden sm:flex items-center gap-2 text-sm">
        <button class="px-3 py-1.5 rounded-lg border border-slate-200 hover:bg-slate-50">
          <i class="fa-regular fa-bookmark mr-2"></i> Save
        </button>
        <button class="px-3 py-1.5 rounded-lg border border-slate-200 hover:bg-slate-50">
          <i class="fa-solid fa-share-nodes mr-2"></i> Share
        </button>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header>
    <div class="max-w-6xl mx-auto px-6 pt-10 pb-6">
      <p class="uppercase tracking-[.25em] text-xs brand font-semibold">Lesson 8</p>
      <h1 class="text-3xl md:text-4xl font-extrabold ink leading-tight mt-1">
        {{ lesson.subtitle|default:lesson.title }}
      </h1>
      <p class="muted mt-3 max-w-3xl">
        Be the bridge between client expectations and mover reality—set boundaries, manage risk, and protect everyone involved.
      </p>
      <div class="mt-4 flex flex-wrap items-center gap-2">
        <span class="badge bg-emerald-50 text-emerald-700 border-emerald-200 text-xs md:text-sm">
          <i class="fa-regular fa-clock"></i> {{ lesson.meta.duration|default:"10–15 mins" }}
        </span>
        <span class="badge bg-sky-50 text-sky-700 border-sky-200 text-xs md:text-sm">
          <i class="fa-solid fa-signal"></i> {{ lesson.meta.level|default:"All Agents" }}
        </span>
        <span class="badge bg-violet-50 text-violet-700 border-violet-200 text-xs md:text-sm">
          <i class="fa-solid fa-chalkboard-user"></i> Client Education
        </span>
      </div>
    </div>
  </header>

  <!-- Body -->
  <main class="max-w-6xl mx-auto px-6 pb-16 grid lg:grid-cols-12 gap-8">
    <!-- Content -->
    <article class="lg:col-span-8">
      <div class="card rounded-2xl p-6 md:p-8">
        <div class="prose max-w-none">
          <p class="text-slate-700">
            Movers know their craft, but they do not know the client’s expectations, the hidden risks in a property, or the limits of what should and should not be done.
            Clients, meanwhile, enter moving day with stress, urgency, and misconceptions. The Realtor’s role is to serve as the bridge between the two—setting boundaries,
            managing expectations, and protecting all parties involved.
          </p>

          <hr class="my-8 border-slate-200"/>

          <h2 id="why-role-matters" class="text-2xl md:text-3xl font-bold ink">Why the Realtor’s Role Matters</h2>
          <ul class="mt-4 space-y-2 text-slate-700">
            <li><strong>Liability flows uphill.</strong> When clients hire movers based on a Realtor’s referral, the Realtor’s credibility is on the line if anything goes wrong.</li>
            <li><strong>Clients take cues from Realtors.</strong> Treat movers as licensed pros in their own scope; clients will follow your lead.</li>
            <li><strong>Prevention beats resolution.</strong> It’s easier to prevent an expensive request than to clean up the fallout.</li>
          </ul>

          <hr class="my-8 border-slate-200"/>

          <h2 id="core-responsibilities" class="text-2xl md:text-3xl font-bold ink">Core Responsibilities of the Realtor</h2>
          <ol class="mt-4 space-y-5 text-slate-700">
            <li>
              <p class="font-semibold">Educate Early, Not on Moving Day</p>
              <ul class="list-disc pl-6 mt-1 space-y-1">
                <li>Set boundaries before trucks arrive.</li>
                <li>Provide a Do’s &amp; Don’ts guide in advance.</li>
                <li>Share at least one real-world story to underline risks.</li>
              </ul>
            </li>
            <li>
              <p class="font-semibold">Set Expectations Clearly</p>
              <ul class="list-disc pl-6 mt-1 space-y-1">
                <li><strong>Movers:</strong> furniture, boxes, safe disassembly.</li>
                <li><strong>Licensed pros:</strong> plumbing, gas, electricity, specialty installs.</li>
                <li><strong>Clients:</strong> valuables, plants, hazardous items.</li>
              </ul>
            </li>
            <li>
              <p class="font-semibold">Anticipate Red Flags</p>
              <ul class="list-disc pl-6 mt-1 space-y-1">
                <li>Built-in fridges, chandeliers, gas dryers—bring these up early.</li>
                <li>Offer to connect clients with licensed specialists in advance.</li>
              </ul>
            </li>
            <li>
              <p class="font-semibold">Use Scripts, Not Warnings</p>
              <p class="mt-1">Frame boundaries as professional guidance.</p>
              <div class="mt-2 p-4 rounded-xl bg-slate-50 border border-slate-200">
                <p class="text-slate-800 text-sm">“Movers are excellent at moving furniture and boxes, but when it comes to water lines or wiring, it’s best to use a licensed professional. That way, you’re fully protected.”</p>
              </div>
            </li>
          </ol>

          <hr class="my-8 border-slate-200"/>

          <h2 id="timing" class="text-2xl md:text-3xl font-bold ink">Timing of Communication</h2>
          <ul class="mt-4 space-y-2 text-slate-700">
            <li><strong>Before moving day:</strong> Send Do’s &amp; Don’ts and discuss high-risk items at the final walkthrough.</li>
            <li><strong>Day of the move (pre-unloading):</strong> “We’ve confirmed what the movers will handle today. Licensed pros will take care of the rest.”</li>
            <li><strong>After the move:</strong> Follow up: did everyone stay within scope? Close the loop and reinforce professionalism.</li>
          </ul>

          <hr class="my-8 border-slate-200"/>

          <h2 id="transfer" class="text-2xl md:text-3xl font-bold ink">Transfer of Responsibility</h2>
          <p class="text-slate-700 mt-3">
            A Realtor’s role is to protect, not to control. Shift ownership of risky decisions back to the client—professionally and clearly.
          </p>
          <ul class="list-disc pl-6 mt-2 space-y-2 text-slate-700">
            <li>If a client insists on a risky task, document your advice and make clear the liability rests with them.</li>
            <li class="text-slate-800"><em>Script:</em> “I want to be clear: if movers handle this, it will not be covered by insurance. My recommendation is to wait for a licensed professional.”</li>
          </ul>

          <hr class="my-8 border-slate-200"/>

          <h2 id="positioning" class="text-2xl md:text-3xl font-bold ink">Professional Positioning</h2>
          <ul class="mt-4 space-y-2 text-slate-700">
            <li>Build trust with clients who feel guided, not left alone.</li>
            <li>Earn respect from movers who aren’t pressured into risky work.</li>
            <li>Protect your reputation by preventing blame when things go wrong.</li>
          </ul>

          <div class="mt-6 p-5 rounded-xl bg-emerald-50 border border-emerald-200">
            <p class="text-slate-800"><strong>Key Takeaway:</strong> Your role isn’t just closing the deal—it’s safeguarding the move with boundaries, resources, and respect for mover limits.</p>
          </div>
        </div>

        <!-- CTA row -->
        <div class="mt-8 flex flex-wrap gap-3">
          <a href="{% if next_topic %}{% url 'lesson_detail' next_topic.slug %}{% else %}{% url 'lesson6' %}{% endif %}"
             class="px-5 py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:opacity-90">
            Next Lesson
          </a>
          <a href="#" class="px-5 py-3 rounded-xl border border-slate-300 font-semibold hover:bg-slate-50">
            Download Client Education Pack (PDF)
          </a>
        </div>
      </div>

      <!-- Prev/Next -->
      <div class="mt-6 flex items-center justify-between text-sm text-slate-600">
        {% if prev_topic %}
          <a href="{% url 'lesson_detail' prev_topic.slug %}" class="hover:text-slate-900"><i class="fa-solid fa-arrow-left-long mr-2"></i> {{ prev_topic.title }}</a>
        {% else %}
          <a href="{% url 'lesson6' %}" class="hover:text-slate-900"><i class="fa-solid fa-arrow-left-long mr-2"></i> Back to Overview</a>
        {% endif %}
        {% if next_topic %}
          <a href="{% url 'lesson_detail' next_topic.slug %}" class="hover:text-slate-900">{{ next_topic.title }} <i class="fa-solid fa-arrow-right-long ml-2"></i></a>
        {% endif %}
      </div>
    </article>

    <!-- Sidebar -->
    <aside class="lg:col-span-4 lg:sticky lg:top-20 h-max">
      <!-- TOC -->
      <div class="card rounded-2xl p-5 mb-5">
        <div class="flex items-center justify-between mb-3">
          <h4 class="font-semibold">On this page</h4>
          <span class="text-xs text-slate-500">Lesson 8</span>
        </div>
        <nav id="toc" class="space-y-2 text-sm"></nav>
      </div>

      <!-- All topics -->
      <div class="card rounded-2xl p-5">
        <h4 class="font-semibold mb-3">All topics</h4>
        <ul class="space-y-1 text-sm">
          {% for t in all_topics %}
          <li>
            <a href="{% url 'lesson_detail' t.slug %}"
               class="block px-3 py-2 rounded-lg border border-transparent hover:border-slate-200 hover:bg-slate-50 {% if t.slug == slug %}bg-slate-100 border-slate-200{% endif %}">
              {{ forloop.counter }}. {{ t.title }}
            </a>
          </li>
          {% endfor %}
        </ul>
        <a href="{% url 'lesson6' %}" class="mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-200 hover:bg-slate-50 text-sm">
          <i class="fa-solid fa-list"></i> Back to Overview
        </a>
      </div>
    </aside>
  </main>

  <footer class="py-10 border-t">
    <div class="max-w-6xl mx-auto px-6 text-xs text-slate-500">
      © <span id="year"></span> Esposito Courses • Lesson 8
    </div>
  </footer>

  <script>
    // year + progress
    document.getElementById('year').textContent = new Date().getFullYear();
    const pb = document.getElementById('progressBar');
    window.addEventListener('scroll', () => {
      const h = document.documentElement;
      const scrolled = (h.scrollTop) / (h.scrollHeight - h.clientHeight);
      pb.style.width = (scrolled * 100) + '%';
    });

    // Build TOC from h2/h3
    const content = document.querySelector('article');
    const toc = document.getElementById('toc');
    const heads = content.querySelectorAll('h2, h3');
    const ul = document.createElement('ul'); ul.className = "space-y-1";
    heads.forEach(h => {
      if(!h.id){ h.id = h.textContent.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,''); }
      const li = document.createElement('li');
      li.innerHTML = `<a href="#${h.id}" class="block px-3 py-2 rounded-lg border border-transparent hover:border-slate-200 hover:bg-slate-50">${h.textContent}</a>`;
      ul.appendChild(li);
    });
    toc.appendChild(ul);
  </script>
</body>
</html>
